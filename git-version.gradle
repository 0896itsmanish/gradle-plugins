def lastTag = 'git describe --abbrev=0 --tags'.execute([],rootProject.projectDir).text.trim()
def currentTag = 'git tag --points-at HEAD'.execute([],rootProject.projectDir).text.trim()

def tempVersion = lastTag + '-SNAPSHOT'

if(hasProperty('version') && !'unspecified'.equals(version)) {
    tempVersion = version
} else if (lastTag.equals(currentTag)){
    tempVersion = currentTag
}

project.version = tempVersion